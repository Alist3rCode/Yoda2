<?php

require_once('./class/checkRights.php');
$right = checkRights($bdd,$_SESSION['id_user']);

$select = $bdd->queryObj('SELECT * FROM INT_SECTION WHERE SEC_VALID = 1');
$dropdown = '';
foreach($select as $key=>$value){
    $dropdown .= '<option value="'.$value->SEC_ID.'">'.$value->SEC_NAME.'</option>';
}



?>

<div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="linkModalTitle">Cr√©ation d'un lien interne</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
            <div class="col-md-12 row">
                <div class="input-group mb-3 col-md-6">
                    <div class="input-group-prepend">
                        <button class="btn btn-outline-success" id="createSectionButton" type="button" >
                            <i class="far fa-plus-square"></i>
                        </button>
                    </div>
                    <select class="custom-select" id="selectSection" >
                        <option selected value="0">Section...</option>
                        <?= $dropdown?>

                    </select>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" id="editSectionButton" type="button" >
                            <i class="far fa-edit"></i>
                        </button>
                    </div>
                </div>
                
                
                <div class="col-md-6">
                    <input type="text" class="loginInput" id='internalLinkName' placeholder="Nom du lien">
                </div>
            </div>
            <div class="col-md-12 row">
                
                <div class="collapse col-md-6" id="createSection">
                    <div class="input-group mb-3 ">
                        <div class="input-group-prepend">
                            <button class="btn btn-outline-success" type="button" id="validNewSection">
                                <i class="fas fa-check"></i>
                            </button>
                        </div>
                        <input type="text" class="form-control loginInput" id='internalCreateSectionName' placeholder="Nom de la section">
                        
                    </div>
                </div>
                <div class="collapse col-md-6" id="editSection">
                    <div class="input-group mb-3 ">
                        <div class="input-group-prepend">
                            <button class="btn btn-outline-success" type="button" id="validModifSection">
                                <i class="fas fa-check"></i>
                            </button>
                        </div>
                        <input type="text" class="form-control loginInput" id='internalEditSectionName' placeholder="Nom de la section">
                        <div class="input-group-append">
                            <button class="btn btn-outline-danger" type="button" id='deleteSection'>
                                <i class="far fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="col-md-12 row">
                <div class="col-md-6 text-center">
                    <div class="custom-file ">
                          <input type="file" class="custom-file-input" id="internalLinkImage"  accept="image/*">
                          <label class="custom-file-label text-left" for="inputGroupFile01">Image du lien</label>
                    </div>
                    <img class="d-none mt-3 mb-3" id="previewLink" src="#" height="100" />
                    <div class="d-none" id="modifImage">0</div>
                </div>

                <div class="col-md-6">
                    <input type="text" class="loginInput" id='internalLinkURL' placeholder="URL du lien">
                </div>

            </div>
            <div class="alert col-md-12 d-none" id="alertModaleInternalLink"> </div>
          
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelModaleLink">Annuler</button>
        <button type="button" class="btn btn-primary" id="validNewLink" >Valider</button>
        
        <div class="d-none" id="linkToModif"></div>
        <button type="button" class="btn btn-danger d-none" id='deleteLink'>Supprimer</button>
        <button type="button" class="btn btn-success d-none" id="modifLink">Modifier</button>
      </div>
    </div>
  </div>